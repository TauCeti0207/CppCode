<div id="article_content" class="article_content clearfix">
        <link rel="stylesheet" href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/ck_htmledit_views-163de54645.css">
                <div id="content_views" class="markdown_views prism-atom-one-dark">
                    <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                        <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                    </svg>
                    <p></p>
<div class="toc">
 <h3><a name="t0"></a>文章目录</h3>
 <ul><li><a href="#_2" target="_self">零、写在前面</a></li><li><a href="#_6" target="_self">一、概念定义</a></li><li><a href="#_41" target="_self">二、题目描述</a></li><li><a href="#_43" target="_self">三、算法详解</a></li><li><a href="#_49" target="_self">四、源码剖析</a></li><li><a href="#_80" target="_self">五、推荐专栏</a></li><li><a href="#_86" target="_self">六、习题练习</a></li></ul>
</div>
<p></p> 
<h1><a name="t1"></a><a id="_2"></a>零、写在前面</h1> 
<p>  这是<a href="https://blog.csdn.net/whereisherofrom/category_11426012.html">《算法零基础100讲》</a> 专栏打卡学习的第 <font color="red">5</font> 天了。如果觉得本专栏太贵无法承受，在博主主页添加博主好友，获取 <font color="red"><strong>付费专栏优惠券</strong></font>。虽然有同学反馈一天一篇太难了，但是也有同学认为这样能够逼着他学习，很爽。任何一种模式，都不可能兼顾所有人，只有靠你自己去适应它，不断调整自己的学习方式，这就是 <strong>「 适者生存 」</strong> 的道理。<br>   我的算法零基础讲解，在前面几讲基本都是没有什么关联的，纯属野路子， <strong>「 书上找不到 」</strong> ，但是训练下来，可以锻炼你的思维能力。所以，就算某一章节落下了，也不要紧，只要坚持每天都打卡，就算漏了，后面也能够通过自己的悟性悟出来前面几章的内容，所以， <strong>「 贵在坚持 」</strong> ！<br>   也有同学是后面才加入的，希望你们不要气馁，当你开始要努力的时候，任何时间点开始都不会太迟，只要肯努力， <strong>「 后来者居上 」</strong> 的例子不胜枚举。</p> 
<h1><a name="t2"></a><a id="_6"></a>一、概念定义</h1> 
<p>  今天要讲的方法很实用，名为计数法。<br>   计数法的含义顾名思义，就是利用一个变量，记录下某个数值出现了多少次。从而实现对数值的计数。例如，计算某个班级里面有多少学生智商大于 163，我们可以这么写：</p> 
<pre class="prettyprint"><code class="prism language-c has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">int</span> <span class="token function">func</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span>iq<span class="token punctuation">,</span> <span class="token keyword">int</span> size<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> cnt <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>iq<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&gt;</span> <span class="token number">163</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
            <span class="token operator">++</span>cnt<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> cnt<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li><li style="color: rgb(153, 153, 153);">8</li><li style="color: rgb(153, 153, 153);">9</li></ul></pre> 
<p>  其中<code>iq[]</code>代表学生们的智商列表，我们把智商列表遍历一遍，然后统计大于 163 的，用一个变量<code>cnt</code>来计数，最后返回这个计数，这就是最简单的计数法。</p> 
<hr> 
<p>  更深层次的，如果我们需要知道所有 IQ 值的分布，怎么来快速完成这个事情呢？沿用上面的方法，我们可以采用一个计数数组来完成这件事情。将 IQ 值 映射到数组的下标中，而数组值本身就对应了计数器的值。</p> 
<pre class="prettyprint"><code class="prism language-c has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">int</span> <span class="token operator">*</span><span class="token function">func</span><span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span>iq<span class="token punctuation">,</span> <span class="token keyword">int</span> size<span class="token punctuation">,</span> <span class="token keyword">int</span> IQMax<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>                <span class="token comment">// (1)</span>
    <span class="token keyword">int</span> i<span class="token punctuation">;</span>
    <span class="token keyword">int</span> <span class="token operator">*</span>cnt <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span> <span class="token operator">*</span><span class="token punctuation">)</span><span class="token function">malloc</span><span class="token punctuation">(</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>IQMax<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// (2)</span>
    <span class="token function">memset</span><span class="token punctuation">(</span>cnt<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token punctuation">(</span>IQMax<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>             <span class="token comment">// (3)</span>
    <span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> size<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>
         <span class="token operator">++</span>cnt<span class="token punctuation">[</span> iq<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>                                 <span class="token comment">// (4)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> cnt<span class="token punctuation">;</span>                                          <span class="token comment">// (5)</span>
<span class="token punctuation">}</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li><li style="color: rgb(153, 153, 153);">8</li><li style="color: rgb(153, 153, 153);">9</li></ul></pre> 
<ul><li><span class="katex--inline"><span class="katex"><span class="katex-mathml">
     
      
       
        
         (
        
        
         1
        
        
         )
        
       
       
        (1)
       
      
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span> 函数给定三个参数，分别代表一个 IQ数组，IQ数组的元素个数，最大的IQ值，要求返回一个数组，代表每个 IQ值 的人数有多少；</li><li><span class="katex--inline"><span class="katex"><span class="katex-mathml">
     
      
       
        
         (
        
        
         2
        
        
         )
        
       
       
        (2)
       
      
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord">2</span><span class="mclose">)</span></span></span></span></span> <code>cnt</code>是一个区间范围为<code>[0, IQMax]</code>的计数器数组，其中<code>cnt[i]</code>代表 IQ值 为 <span class="katex--inline"><span class="katex"><span class="katex-mathml">
     
      
       
        
         i
        
       
       
        i
       
      
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.65952em; vertical-align: 0em;"></span><span class="mord mathdefault">i</span></span></span></span></span> 的学生人数；</li><li><span class="katex--inline"><span class="katex"><span class="katex-mathml">
     
      
       
        
         (
        
        
         3
        
        
         )
        
       
       
        (3)
       
      
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord">3</span><span class="mclose">)</span></span></span></span></span> 初始化所有 IQ值 的学生人数都为 0；</li><li><span class="katex--inline"><span class="katex"><span class="katex-mathml">
     
      
       
        
         (
        
        
         4
        
        
         )
        
       
       
        (4)
       
      
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord">4</span><span class="mclose">)</span></span></span></span></span> 遍历每个学生，找到对应的 IQ值 对应的计数器，执行自增操作，这种情况下，<code>++cnt[ iq[i] ]</code>和<code>cnt[ iq[i] ]++</code>是等价的；</li><li><span class="katex--inline"><span class="katex"><span class="katex-mathml">
     
      
       
        
         (
        
        
         5
        
        
         )
        
       
       
        (5)
       
      
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord">5</span><span class="mclose">)</span></span></span></span></span> 返回计数器数组；</li></ul> 
<h1><a name="t3"></a><a id="_41"></a>二、题目描述</h1> 
<p>  给定一个 <span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        n
       
       
        (
       
       
        1
       
       
        ≤
       
       
        n
       
       
        ≤
       
       
        1
       
       
        
         0
        
        
         5
        
       
       
        )
       
      
      
       n(1 \le n \le 10^5)
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathdefault">n</span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.77194em; vertical-align: -0.13597em;"></span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1.06411em; vertical-align: -0.25em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.814108em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span> 个元素的整数数组 <span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        a
       
       
        [
       
       
        i
       
       
        ]
       
       
        (
       
       
        0
       
       
        ≤
       
       
        a
       
       
        [
       
       
        i
       
       
        ]
       
       
        ≤
       
       
        
         2
        
        
         20
        
       
       
        )
       
      
      
       a[i] (0 \le a[i] \le 2^{20})
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathdefault">a</span><span class="mopen">[</span><span class="mord mathdefault">i</span><span class="mclose">]</span><span class="mopen">(</span><span class="mord">0</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathdefault">a</span><span class="mopen">[</span><span class="mord mathdefault">i</span><span class="mclose">]</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 1.06411em; vertical-align: -0.25em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.814108em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mtight">0</span></span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span>，要求找出一些 “含有两个数” 的数对，并且这两个数的和为 2 的幂。求这样的数对的对数，如果超过 <span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        1
       
       
        
         0
        
        
         9
        
       
       
        +
       
       
        7
       
      
      
       10^9+7
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.897438em; vertical-align: -0.08333em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.814108em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">9</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">7</span></span></span></span></span>，则返回除上 <span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        1
       
       
        
         0
        
        
         9
        
       
       
        +
       
       
        7
       
      
      
       10^9+7
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.897438em; vertical-align: -0.08333em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.814108em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">9</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">7</span></span></span></span></span> 后的余数。</p> 
<h1><a name="t4"></a><a id="_43"></a>三、算法详解</h1> 
<p>  如果用最暴力的算法，那就是从 <span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        n
       
      
      
       n
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathdefault">n</span></span></span></span></span> 个数中找 2 个数，然后判断它们的和是否为 <span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        2
       
      
      
       2
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">2</span></span></span></span></span> 的幂，如果是，则计数器加一。根据组合原理可得，总共有 <span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        
         C
        
        
         n
        
        
         2
        
       
      
      
       C_n^2
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.06111em; vertical-align: -0.247em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.814108em;"><span class="" style="top: -2.453em; margin-left: -0.07153em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.247em;"><span class=""></span></span></span></span></span></span></span></span></span></span> 个数对需要判断，所以，这样做的算法时间复杂度为 <span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        O
       
       
        (
       
       
        
         n
        
        
         2
        
       
       
        )
       
      
      
       O(n^2)
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1.06411em; vertical-align: -0.25em;"></span><span class="mord mathdefault" style="margin-right: 0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.814108em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span> （其中 <span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        
         C
        
        
         n
        
        
         m
        
       
      
      
       C_n^m
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.93033em; vertical-align: -0.247em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right: 0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height: 0.664392em;"><span class="" style="top: -2.453em; margin-left: -0.07153em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height: 0.247em;"><span class=""></span></span></span></span></span></span></span></span></span></span> 为组合数）。<br>   那么，我们换个思路，观察数组的元素最大不会超过 <span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        
         2
        
        
         20
        
       
      
      
       2^{20}
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.814108em; vertical-align: 0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.814108em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mtight">0</span></span></span></span></span></span></span></span></span></span></span></span></span>，也就是两个数加起来最大不会超过 <span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        
         2
        
        
         21
        
       
      
      
       2^{21}
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.814108em; vertical-align: 0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.814108em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span></span>。所以，满足要求的数对，它们的加和一定是 <span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        
         2
        
        
         0
        
       
      
      
       2^0
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.814108em; vertical-align: 0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.814108em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span></span></span></span></span></span></span></span></span>、<span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        
         2
        
        
         1
        
       
      
      
       2^1
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.814108em; vertical-align: 0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.814108em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span>、<span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        
         2
        
        
         2
        
       
      
      
       2^2
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.814108em; vertical-align: 0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.814108em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></span>、<span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        .
       
       
        .
       
       
        .
       
      
      
       ...
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.10556em; vertical-align: 0em;"></span><span class="mord">.</span><span class="mord">.</span><span class="mord">.</span></span></span></span></span>、<span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        
         2
        
        
         21
        
       
      
      
       2^{21}
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.814108em; vertical-align: 0em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height: 0.814108em;"><span class="" style="top: -3.063em; margin-right: 0.05em;"><span class="pstrut" style="height: 2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span></span> 这 22 个数其中之一。<br>   于是，我们可以枚举其中一个数 <span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        x
       
      
      
       x
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathdefault">x</span></span></span></span></span>，再枚举它们的和 <span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        s
       
       
        u
       
       
        m
       
      
      
       sum
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathdefault">s</span><span class="mord mathdefault">u</span><span class="mord mathdefault">m</span></span></span></span></span>，那么另一个数一定是 <span class="katex--display"><span class="katex-display"><span class="katex"><span class="katex-mathml">
     
      
       
        
         o
        
        
         t
        
        
         h
        
        
         e
        
        
         r
        
        
         =
        
        
         s
        
        
         u
        
        
         m
        
        
         −
        
        
         x
        
       
       
        other=sum-x
       
      
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord mathdefault">o</span><span class="mord mathdefault">t</span><span class="mord mathdefault">h</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span><span class="mspace" style="margin-right: 0.277778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right: 0.277778em;"></span></span><span class="base"><span class="strut" style="height: 0.66666em; vertical-align: -0.08333em;"></span><span class="mord mathdefault">s</span><span class="mord mathdefault">u</span><span class="mord mathdefault">m</span><span class="mspace" style="margin-right: 0.222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right: 0.222222em;"></span></span><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathdefault">x</span></span></span></span></span></span> 我们只要想办法找出 <span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        o
       
       
        t
       
       
        h
       
       
        e
       
       
        r
       
      
      
       other
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord mathdefault">o</span><span class="mord mathdefault">t</span><span class="mord mathdefault">h</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span></span></span></span></span> 的个数进行累加，返回这个累加值即可。<br>   这里的 <span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        o
       
       
        t
       
       
        h
       
       
        e
       
       
        r
       
      
      
       other
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.69444em; vertical-align: 0em;"></span><span class="mord mathdefault">o</span><span class="mord mathdefault">t</span><span class="mord mathdefault">h</span><span class="mord mathdefault">e</span><span class="mord mathdefault" style="margin-right: 0.02778em;">r</span></span></span></span></span> 可以映射到数组下标，每次枚举完 <span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        x
       
      
      
       x
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathdefault">x</span></span></span></span></span>，我们可以对它执行自增操作，这样在下次统计的时候就可以通过数组下标在 <span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        O
       
       
        (
       
       
        1
       
       
        )
       
      
      
       O(1)
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathdefault" style="margin-right: 0.02778em;">O</span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span> 的时间内获取它曾经出现过多少次。算法的时间复杂度为 <span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        O
       
       
        (
       
       
        n
       
       
        c
       
       
        )
       
      
      
       O(nc)
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mord mathdefault" style="margin-right: 0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mord mathdefault">c</span><span class="mclose">)</span></span></span></span></span>，其中 <span class="katex--inline"><span class="katex"><span class="katex-mathml">
    
     
      
       
        c
       
      
      
       c
      
     
    </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.43056em; vertical-align: 0em;"></span><span class="mord mathdefault">c</span></span></span></span></span> 为常数。</p> 
<h1><a name="t5"></a><a id="_49"></a>四、源码剖析</h1> 
<pre class="prettyprint"><code class="prism language-c has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">int</span> cnt<span class="token punctuation">[</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span><span class="token number">21</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">int</span> <span class="token function">countPairs</span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token operator">*</span> deliciousness<span class="token punctuation">,</span> <span class="token keyword">int</span> deliciousnessSize<span class="token punctuation">)</span><span class="token punctuation">{<!-- --></span>
    <span class="token keyword">int</span> i<span class="token punctuation">,</span> sum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">int</span> ans <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token function">memset</span> <span class="token punctuation">(</span>cnt<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token keyword">sizeof</span><span class="token punctuation">(</span>cnt<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment">// (1)</span>

    <span class="token keyword">for</span><span class="token punctuation">(</span>i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> deliciousnessSize<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>         <span class="token comment">// (2)</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span>sum <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> sum <span class="token operator">&lt;=</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">&lt;&lt;</span><span class="token number">21</span><span class="token punctuation">)</span><span class="token punctuation">;</span> sum <span class="token operator">*=</span> <span class="token number">2</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>     <span class="token comment">// (3)</span>
            other <span class="token operator">=</span> sum <span class="token operator">-</span> deliciousness<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>          <span class="token comment">// (4)</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>other <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{<!-- --></span>                         <span class="token comment">// (5) </span>
                <span class="token keyword">continue</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            ans <span class="token operator">+=</span> cnt<span class="token punctuation">[</span> other <span class="token punctuation">]</span><span class="token punctuation">;</span>                     <span class="token comment">// (6)</span>
            ans <span class="token operator">%=</span> <span class="token number">1000000007</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token operator">++</span> cnt<span class="token punctuation">[</span> deliciousness<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token punctuation">]</span><span class="token punctuation">;</span>                  <span class="token comment">// (7)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> ans<span class="token punctuation">;</span>                                      <span class="token comment">// (8)</span>
<span class="token punctuation">}</span>
<div class="hljs-button {2}" data-title="复制" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.4259&quot;}"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li><li style="color: rgb(153, 153, 153);">8</li><li style="color: rgb(153, 153, 153);">9</li><li style="color: rgb(153, 153, 153);">10</li><li style="color: rgb(153, 153, 153);">11</li><li style="color: rgb(153, 153, 153);">12</li><li style="color: rgb(153, 153, 153);">13</li><li style="color: rgb(153, 153, 153);">14</li><li style="color: rgb(153, 153, 153);">15</li><li style="color: rgb(153, 153, 153);">16</li><li style="color: rgb(153, 153, 153);">17</li><li style="color: rgb(153, 153, 153);">18</li><li style="color: rgb(153, 153, 153);">19</li></ul></pre> 
<ul><li><span class="katex--inline"><span class="katex"><span class="katex-mathml">
     
      
       
        
         (
        
        
         1
        
        
         )
        
       
       
        (1)
       
      
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span> 初始化一个计数器数组，并且设定所有数出现次数均为 <span class="katex--inline"><span class="katex"><span class="katex-mathml">
     
      
       
        
         0
        
       
       
        0
       
      
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 0.64444em; vertical-align: 0em;"></span><span class="mord">0</span></span></span></span></span>；</li><li><span class="katex--inline"><span class="katex"><span class="katex-mathml">
     
      
       
        
         (
        
        
         2
        
        
         )
        
       
       
        (2)
       
      
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord">2</span><span class="mclose">)</span></span></span></span></span> 枚举其中一个数；</li><li><span class="katex--inline"><span class="katex"><span class="katex-mathml">
     
      
       
        
         (
        
        
         3
        
        
         )
        
       
       
        (3)
       
      
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord">3</span><span class="mclose">)</span></span></span></span></span> 两个数的和为2的幂，所以可以枚举所有的和；</li><li><span class="katex--inline"><span class="katex"><span class="katex-mathml">
     
      
       
        
         (
        
        
         4
        
        
         )
        
       
       
        (4)
       
      
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord">4</span><span class="mclose">)</span></span></span></span></span> 这样就可以用减法计算出另一个数<code>other</code>；</li><li><span class="katex--inline"><span class="katex"><span class="katex-mathml">
     
      
       
        
         (
        
        
         5
        
        
         )
        
       
       
        (5)
       
      
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord">5</span><span class="mclose">)</span></span></span></span></span> 如果另一个数小于0，则继续枚举另一个和；</li><li><span class="katex--inline"><span class="katex"><span class="katex-mathml">
     
      
       
        
         (
        
        
         6
        
        
         )
        
       
       
        (6)
       
      
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord">6</span><span class="mclose">)</span></span></span></span></span> 否则<code>cnt[other]</code>里存的就是另一个数的数量，直接将方案数进行累加；</li><li><span class="katex--inline"><span class="katex"><span class="katex-mathml">
     
      
       
        
         (
        
        
         7
        
        
         )
        
       
       
        (7)
       
      
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord">7</span><span class="mclose">)</span></span></span></span></span> 然后，把当前的这个数放入计数器中；</li><li><span class="katex--inline"><span class="katex"><span class="katex-mathml">
     
      
       
        
         (
        
        
         8
        
        
         )
        
       
       
        (8)
       
      
     </span><span class="katex-html"><span class="base"><span class="strut" style="height: 1em; vertical-align: -0.25em;"></span><span class="mopen">(</span><span class="mord">8</span><span class="mclose">)</span></span></span></span></span> 最后，返回<code>ans</code>为累加和；</li></ul> 
<h1><a name="t6"></a><a id="_80"></a>五、推荐专栏</h1> 
<center> 
 <a href="https://blog.csdn.net/whereisherofrom/category_11158834.html"><font color="FF4500"><b>🧡《<u>C语言入门100例</u>》🧡</b></font></a>
</center>
<br> 
<center> 
 <a href="https://blog.csdn.net/WhereIsHeroFrom/article/details/118273536"><font color="FF4500"><b><u>没有冲突的哈希表 | 计数法的使用</u></b></font></a>
</center> 
<h1><a name="t7"></a><a id="_86"></a>六、习题练习</h1> 
<div class="table-box"><table><thead><tr><th>序号</th><th>题目链接</th><th>难度</th></tr></thead><tbody><tr><td>1</td><td><a href="https://leetcode-cn.com/problems/sum-of-unique-elements/">唯一元素的和</a></td><td>★☆☆☆☆</td></tr><tr><td>2</td><td><a href="https://leetcode-cn.com/problems/first-unique-character-in-a-string/">字符串中的第一个唯一字符</a></td><td>★☆☆☆☆</td></tr><tr><td>3</td><td><a href="https://leetcode-cn.com/problems/check-if-all-characters-have-equal-number-of-occurrences/">检查是否所有字符出现次数相同</a></td><td>★☆☆☆☆</td></tr><tr><td>4</td><td><a href="https://leetcode-cn.com/problems/find-all-numbers-disappeared-in-an-array/">找到所有数组中消失的数字</a></td><td>★☆☆☆☆</td></tr><tr><td>5</td><td><a href="https://leetcode-cn.com/problems/number-of-good-pairs/">好数对的数目</a></td><td>★★☆☆☆</td></tr><tr><td>6</td><td><a href="https://leetcode-cn.com/problems/count-good-meals/">大餐计数</a></td><td>★★☆☆☆</td></tr></tbody></table></div>
<center>
 👇🏻添加 博主 获取付费专栏优惠券👇🏻
</center>
                </div><div><div></div></div>
                <link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-3fd7f7a902.css" rel="stylesheet">
                <link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-49037e4d27.css" rel="stylesheet">
        </div>